<!DOCTYPE html>
<html lang="en">
<head>
    <title>Twitch.tv freeCodeCamp</title>
    <meta charset="UTF-8">

    <!-- bootstrap -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
		<link href='https://fonts.googleapis.com/css?family=Indie+Flower' rel='stylesheet' type='text/css'>
		<style>
			body {
				background-color: forestgreen;
			}
			h1 {
				font-family: 'Indie Flower', cursive;
				color: white;
				font-size: 45px;
			}
			h2 {
				color: white;
			}
			.imageLogo {
				height: 70px;
				width : 70px;
				border-radius : 50%;
				display : inline;
			}
			.well {
				margin-left: auto;
				margin-right: auto;
				color: white;
				background-color: #1D1D4C;
			}
			.user {
				color:yellow;
			}
	
		</style>
</head>
<body>
	<div class="container">
		<h1 class="text-center">Twitch.tv</h1>
		<h2 class="text-center">freeCodeCamp</h2>
		<hr>
		<div class="container" id="accounts">
		</div>
	</div>	

<!-- jquery -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
	
<!-- bootstrap js -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
	
<script>
	$(document).ready(function() {
		var users = [	
		"ogamingsc2", "freecodecamp", "storbeck", "terakilobyte", "habathcx", "RobotCaleb", "thomasballinger", "noobs2ninjas", "beohoff", "brunofin", "comster404" ];
		var url = "https://api.twitch.tv/kraken/streams/";
		var url2 = "https://api.twitch.tv/kraken/channels/";
		var u = 0;
		var acc = $("#accounts");
		var img;
		var logos = [];
		
		function addMsg(message, channel, logo, status, link) {
			if (logo) {
				img = "<img src='" + logo + "' class='imageLogo'>";
			} else if (message === "CLOSED") {
				img = "<i class='fa fa-times-circle fa-5x'></i>";
			} else {
				img = "<i class='fa fa-question-circle fa-5x'></i>";
			}
			
			if (!status) {
				status = "&nbsp;"
			}
			acc.append("<div class='row well'><div class='col-md-4'>" + img + "&nbsp; <i class='user'>" + channel + "</i></div><div class='col-md-4'>" + message + "</div><div class='col-md-4'><a href='" + link + "'>" + status + "</a></div></div>");
			u++;
		}
		
		function makeURL(x) {
			return url + x + '?callback=?';
		}
		
		users.forEach(function(chan) {
			$.getJSON(makeURL(chan), function(data) {
				console.log(data);
				console.log(chan);
				if (data.stream === null) {
					addMsg("OFFLINE", chan);
				} else if (data.status === 422) {
					addMsg("CLOSED", chan);
				} else {
					addMsg("ONLINE", chan, data.stream.channel.logo, data.stream.channel.status, data._links.self);
				}
			});
		});
	});
</script>
</body>
</html>
