<!DOCTYPE html>
<html>
<head>
  <title>Chemistry Reviewer</title>
  <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
  <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
  <style>
  .box {
    border: solid 1px black;
    padding-top: 10px;
  }

  body {
    font-size:14px;
  }

  .submit {
    text-align:right;
    margin:10px;
    border:none;
  }

  a {
    color: black;
    font-size: 16px;
    border: solid 1px black;
    border-bottom: none;
    margin-left: 0px;
    margin-right: 0px;
  }

  #result {
    color: green;
  }

  #nex {
    display: none;
  }
  #bak {
    display: none;
  }
  </style>
</head>
<body>
  <h1 class="text-center">Chemistry Reviewer</h1>
  <div class="container">
    <div class="row">
      <div class="col-md-12 text-center center-block">
        <ul class="nav nav-pills navbar-right">
          <li><a href="#">Home</a></li>
          <li><a href="#">Map</a></li>
          <li><a href="#">Help</a></li>
        </ul>
      </div>
    </div>
  </div>
  <div class="container">
    <div class="row box">
      <div class="col-md-4">
        <h4 id="lessonHeading">Lesson : </h4>
      </div>
      <div class="col-md-8" id="nav">
      </div>
    </div>
    <hr>
    <div class="row box">
      <div class="col-md-4">
        <div id="lessonContent">Lesson Content : </div>
      </div>
      <div class="col-md-8">
        <div class="well"><h4>Quiz : <span id="result"></span></h4>
          <div id="quiz"></div>
          <div id="instruction"></div>
          <div>
              <label for="formGroupExampleInput" id="question"></label>
              <input type="text" class="form-control" id="answer" placeholder="Answer">
              <hr>
              <button class="btn btn-danger" id="check">Check</button>
              <button class="btn btn-default" id="bak">Back</button>
              <button class="btn btn-default" id="nex">Next</button>
              <hr>
              <p>Score : <span id="score">0</span> / <span id="total"></span></p>
          </div>
        </div>
      </div>
    </div>
    <div class="row submit">
        <button class="btn btn-success" id="back">Previous Lesson</button>
        <button class="btn btn-primary" id="next">Next Lesson</button>
      </div>
  </div>
<script>
$(document).ready(function() {
  var lessC = $("#lessonContent");
  var lessH = $("#lessonHeading");
  var next = $("#next");
  var back = $("#back");
  var i = $("#instruction");
  var q = $("#question");
  var a = $("#answer");
  var c = $("#check");
  var r = $("#result");
  var total = $("#total");
  var scoreI = $("#score");
  var nex = $("#nex");
  var bak = $("#bak");
  var score = 0;
  var l = 0;
  var qItem = 0;
  var tableSet = false;
  var q1,q2,q3,q4,q5;

  function showLesson(lesson, item) {
    lessH.html(lesson.head);
    lessC.html(lesson.content);
    i.html(lesson.instruction);
    q.html(lesson.quiz[item].q);
    total.html(lesson.quiz.length);
    console.log(lesson.quiz[item].table);
    if (lesson.quiz[item].table) {
      console.log("hi");
      a.replaceWith(lesson.quiz[item].d);
    }
  }

  function reset() {
    score = 0;
    qItem = 0;
    a.empty();
    r.empty();
    scoreI.html(0);
    bak.css("display", "none");
    document.querySelector("#answer").value = "";
  }

  c.click(function() {
      if (lessArray[l].quiz[qItem].table) {
        var tableAns = [];
        for (var i = 0; i < lessArray[l].quiz[qItem].a.length; i++) {
          var answerTd = $("#q" + (i + 1)).val();
          tableAns.push(answerTd);
        }
        console.log(tableAns);
        for (var i = 0; i < lessArray[l].quiz[qItem].a.length; i++) {
          if (tableAns[i] != lessArray[l].quiz[qItem].a[i]) {
            console.log(false);
            r.css("color", "red");
            r.html("Wrong, try again");
            return;
          }
          r.css("color", "green");
          r.html("Correct !");
          nex.css("display", "inline");
          score++;
          scoreI.html(score);
        }
        return;
      }
      var qA = lessArray[l].quiz[qItem].a;
      var sA = document.querySelector("#answer").value;
      if (qA == sA) {
        r.css("color", "green");
        r.html("Correct !");
        nex.css("display", "inline");
        score++;
        scoreI.html(score);
      } else {
        r.css("color", "red");
        r.html("Wrong, try again");
      }
  });

  nex.click(function() {
    document.querySelector("#answer").value = "";
    qItem++;
    i.html(lessArray[l].instruction);
    q.html(lessArray[l].quiz[qItem].q);
    r.empty();
    nex.css("display", "none");
    bak.css("display", "inline");
  });

  bak.click(function() {
    qItem--;
    score--;
    i.html(lessArray[l].instruction);
    q.html(lessArray[l].quiz[qItem].q);
    r.empty();
  });

  next.click(function() {
    if (l < lessArray.length) {
      l++;
      reset();
      showLesson(lessArray[l], 0);
      };
  });

  back.click(function() {
    if (l != 0) {
    l--;
    reset();
    showLesson(lessArray[l], 0);  
    } 
  });

  showLesson(lessArray[l], 0);
});

</script>
<script src="data.js"></script>
</body>
</html>